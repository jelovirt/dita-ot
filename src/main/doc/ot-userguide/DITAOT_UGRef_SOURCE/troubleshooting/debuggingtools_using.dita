<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "../dtd/concept.dtd">
<!-- 
This file is part of the DITA Open Toolkit project hosted on Sourceforge.net.
See the accompanying license.txt file for applicable licenses.
-->
<concept id="debuggingtools_using">
	<title>Using the tools</title>
	<prolog>
		<author type="creator">Richard Johnson</author>
		<author type="contributor">Anna van Raaphorst</author>
		<publisher>OASIS (Organization for the Advancement of Structured Information Standards)</publisher>
		<copyright>
			<copyryear year="2007"/>
			<copyrholder>VR Communications, Inc.</copyrholder>
		</copyright>
		<critdates>
			<created date="2006-05-01"/>
			<revised modified="2007-04-17"/>
		</critdates>
		<metadata>
			<keywords>
				<keyword>troubleshooting the build process</keyword>
				<keyword>debugging tool</keyword>
				<keyword>reporting tool</keyword>
				<keyword>message topic generation tool</keyword>
				<keyword>ditamsg_generator.xsl message topic generator</keyword>
				<keyword>ditadebug.php cross-reference debugging tool</keyword>
				<keyword>ditaauthors.php author and copyright reporting tool</keyword>
				<keyword>ditaids.php ID checking reporting tool</keyword>
				<keyword>ditalinks.php URL checking debug tool</keyword>
				<keyword>ditakeys.php keyword checking reporting tool</keyword>
				<keyword>ditapreview.php incremental build tool</keyword>
				<indexterm>troubleshooting the build process<indexterm>tools and techniques for</indexterm>
				</indexterm>
				<indexterm>tools and techniques for troubleshooting the build process</indexterm>
				<indexterm>debugging tools</indexterm>
				<indexterm>reporting tools</indexterm>
				<indexterm>file generation tools</indexterm>
				<indexterm>automatic message file generation tool</indexterm>
				<indexterm>message topic generator (ditamsg_generator.xsl)</indexterm>
				<indexterm>ditamsg_generator.xsl message topic generator</indexterm>
				<indexterm>cross-reference debugging tool (ditadebug.php)</indexterm>
				<indexterm>ditadebug.php cross-reference debugging tool</indexterm>
				<indexterm>URL checking debug tool (ditalinks.php)</indexterm>
				<indexterm>ditalinks.php URL checking debug tool</indexterm>
				<indexterm>author and copyright reporting tool (ditaauthors.php)</indexterm>
				<indexterm>ditaauthors.php author and copyright reporting tool</indexterm>
				<indexterm>ID checking reporting tool (ditaids.php)</indexterm>
				<indexterm>ditaids.php ID checking reporting tool</indexterm>
				<indexterm>keyword checking reporting tool (ditakeys.php)</indexterm>
				<indexterm>ditakeys.php keyword checking reporting tool</indexterm>
				<indexterm>PHP tool set for debugging, reporting, and file generation</indexterm>
				<indexterm>XSL stylesheet for automatic message topic generation</indexterm>
				<indexterm>ditapreview.php incremental build tool</indexterm>
			</keywords>
			<prodinfo>
				<prodname>DITA Open Toolkit</prodname>
				<vrmlist>
					<vrm version="1.4.1"/>
				</vrmlist>
			</prodinfo>
		</metadata>
	</prolog>
	<conbody>
		<section>
			<title>Tools overview</title>
			<p>Because the authors of this document needed debugging, reporting, and automatic file generation support not available in DITA Open Toolkit, they produced several tools of their own. These tools are now available as part of the Toolkit.</p>
		</section>
		<section>
			<title>Message topic generator (ditamsg_generator.xsl)</title>
			<p>An XSLT stylesheet (<filepath>ditamsg_generator.xsl</filepath>) was used to automate the creation of the Toolkit  messages reference topic (<xref href="messages_toolkit.dita" scope="local">Messages generated by the Toolkit</xref>). This stylesheet could be useful to other DITA users as an example of how to handle a similar task when documenting other software, especially when the product messages are stored in a valid XML file.</p>
		</section>
		<section>
			<title>DITA debugging tools (ditadebug.php, ditaedit.php and ditalinks.php)</title>
			<p>Three debugging tools were written to deal with the following kinds of problems  that were encountered while writing this document.</p>
			<p>
				<b>Cross-referencing problems handled by ditadebug.php</b>
			</p>
			<ul>
				<li>An error is generated during the build  that indicates a file cannot be found or opened. The Toolkit message log tells you the name of the file it cannot find, but not which file is referring to it. This makes it difficult to find the source of the error.</li>
				<li>Some errors in the DITA source files do not produce any build error messages at all, but the output produced is incorrect. These kinds of problems are subtle and can be very difficult to troubleshoot.</li>
			</ul>
			<p>Examples of the second case include the following:</p>
			<ul>
				<li>When running under Windows, a referenced filepath uses the wrong case of one of the elements, for example, <filepath>../Dir1/fn.ft</filepath> instead of <filepath>../dir1/fn.ft.</filepath>.</li>
				<li>A cross-reference points to an ID in a file that does not exist.</li>
			</ul>
			<p>The <filepath>ditadebug.php</filepath> tool also helps to answer the following kinds of questions:</p>
			<ul>
				<li>Which directories contain files used by a given ditamap?</li>
				<li>Which files in source directories are not used in a ditamap, and therefore could be erased?</li>
				<li>For a given file referenced in a ditamap, what type of file is it, who was its author, how big is it, when was it last changed, and what is it about?</li>
				<li>Which URLs are referenced in the files used in a ditamap?</li>
				<li>What are all the linked connections from one file to another used by a given ditamap?</li>
			</ul>
			<p>
				<b>String search and replace with ditaedit.php</b>
			</p>
			<p>The <filepath>ditaedit.php</filepath> tool can be used to search for strings in all files in a DITA map. It can also be used to replace strings in all files.</p>
			<p>
				<b>URL checking problems handled by ditalinks.php</b>
			</p>
			<p>The <filepath>ditalinks.php</filepath> tool checks external URLs and verifies that they exist.</p>
			<note>The only kind of URL this tool cannot handle is one requiring login to a website. The tool reports these with the message "URL may not exist." You will need to verify these manually.</note>
		</section>
		<section>
			<title>DITA reporting tools (ditaauthors.php, ditaids.php, and ditakeys.php)</title>
			<p>While writing this document we found it useful to have several types of reporting information derived from the source files:</p>
			<ul>
				<li>Who are the authors and copyright holders?</li>
				<li>Which IDs were defined in the source file and were any of them duplicates?</li>
				<li>Which keywords were used in the source file &lt;prolog&gt; elements?</li>
			</ul>
			<p>The <filepath>ditaauthors.php</filepath>, <filepath>ditaids.php</filepath>, and <filepath>ditakeys.php</filepath> tools were written to provide answers to these questions.</p>
		</section>
		<section>
			<title>Build preview tool (ditapreview.php)</title>
			<p>The <filepath>ditapreview.php</filepath> tool dynamically builds a DITA map file for only the most recently modified topics and then invokes Internet Explorer to display them.</p>
		</section>
		<section>
			<title>Software prequisites required</title>
			<p>To run these tools you must have the PHP interpreter installed on your build machine. PHP is a free tool that can be downloaded from <xref href="http://www.php.net" format="html" scope="external"/>.</p>
		</section>
		<section>
			<title>Example of how to invoke the tools</title>
			<p>You can include any of these tools as part of an Ant build script. The following example shows how to run the debugging tool and write the output to a file.</p>
			<codeblock>
&lt;!-- create the ditamap debug cross-reference --&gt;
&lt;target name="debug"&gt;
&lt;echo&gt;Building debugging file ditadebug.txt&lt;/echo&gt;
&lt;mkdir dir="${outdir}/debug_files"/&gt;
&lt;exec executable="${PHPdir}/php.exe" dir = "${projdir}" 
output="${outdir}/debug_files/ditadebug.txt"&gt;
&lt;arg value="${projdir}/project/tools/ditadebug.php"/&gt;
&lt;arg value="${MAP_file}"/&gt;
&lt;/exec&gt;
&lt;/target&gt;
		</codeblock>
		</section>
	</conbody>
</concept>
